
<!DOCTYPE HTML>
<html>
<head>

    <title>表单填写 Ueditor FormDesign Plugins -leipi.org</title>
    <meta name="keyword" content="ueditor formdesign plugins,ueditor扩展,web表单设计器,高级表单设计器,Leipi Form Design,web form设计器,web form designer">
    <meta name="description" content="javascript jquery ueditor php表单设计器实例演示与下载！">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="author" content="leipi.org">
    <link href="css/bootstrap/css/bootstrap.css?2028" rel="stylesheet" type="text/css" />
    <!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="/Public/css/bootstrap/css/bootstrap-ie6.css?2028">
    <![endif]-->
    <!--[if lte IE 7]>
    <link rel="stylesheet" type="text/css" href="/Public/css/bootstrap/css/ie.css?2028">
    <![endif]-->
    <link href="css/site.css?2028" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        var _root = 'http://formdesign.leipi.org/', _controller = 'demo';
    </script>

    <script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.min.js?2028"></script>
    <script type="text/javascript" charset="utf-8" src="js/ueditor/ueditor.config.js?2028"></script>
    <script type="text/javascript" charset="utf-8" src="js/ueditor/ueditor.all.js?2028"> </script>
    <script type="text/javascript" charset="utf-8" src="js/ueditor/lang/zh-cn/zh-cn.js?2028"></script>
    <script type="text/javascript" charset="utf-8" src="js/formdesigner.js"></script>
    <script type="text/javascript">
        function tbAddRow(dname) {
            var sTbid = dname + "_table";
            $("#" + sTbid + " .template")
                //连同事件一起复制
                .clone(true)
                //去除模板标记
                .removeClass("template")
                //修改内部元素
                .find(".delrow").show().end()
                .find("input").val("").end()
                .find("textarea").val("").end()
                //插入表格
               .appendTo($("#" + sTbid));
        }
        //统计
        function sum_total(dname, e) {
            var tsum = 0;
            $('input[name="' + dname + '[]"]').each(function () {
                var t = parseFloat($(this).val());
                if (!t) t = 0;
                if (t) tsum += t;
                $(this).val(t);
            });
            $('input[name="' + dname + '[total]"]').val(tsum);
        }
        /*删除tr*/
        function fnDeleteRow(dname, obj) {
            var sTbid = dname + "_table";
            var oTable = document.getElementById(sTbid);
            while (obj.tagName != "TR") {
                obj = obj.parentNode;
            }
            oTable.deleteRow(obj.rowIndex);
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="page-header">
            <h1>表单填写</h1>
            <input id="forminstanceid" name="forminstanceid" class="hidden" />
            <label class="label">表单名称</label>
            <input id="forminstancename" type="text" />
            <input id="saveforminstance" onclick="saveforminstance();" type="button" class="btn btn-default" value="提交" />
        </div>
        <form id="formcontent">
            <div id="previewcontent"></div>
        </form>
    </div><!--end container-->
    <script type="text/javascript">
        var fid = (getUrlParameter('fid')) ? getUrlParameter('fid') : 0;
        $.ajax({
            type: 'GET',
            url: './FormService.ashx?atype=getforminstance&fid=' + fid,
            dataType: 'json',
            success: function (data) {
                if (data) {
                    $("#forminstanceid").val(data.id);
                    $("#previewcontent").html(data.content.replace("\\\"", "\""));
                }
            }
        });
        function saveforminstance() {
            $.ajax({
                type: 'POST',
                url: './FormService.ashx?atype=saveforminstance&fid=' + fid + '&fsid=' + $("#forminstanceid").val(),
                dataType: 'json',
                data: { 'content': $("#formcontent").serialize() }
            });
        }
    </script>
</body>
</html>